<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - GEOPOL Analytics</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body class="bg-gray-50">
    <div class="flex min-h-screen">
        <!-- Main Content -->
        <main class="flex-1 p-8">
            <div class="max-w-7xl mx-auto">
                <!-- Header -->
                <div class="mb-8">
                    <h1 class="text-3xl font-bold text-gray-800">üìä Dashboard Analytique GEOPOL</h1>
                    <p class="text-gray-600 mt-2">Vue d'ensemble unifi√©e - 4 modules d'analyse</p>
                </div>

                <!-- Navigation principale - 4 modules -->
                <nav class="bg-white shadow-sm mb-6 rounded-lg">
                    <div class="flex space-x-1 p-4">
                        <button data-nav="themes" class="px-4 py-2 rounded bg-blue-600 text-white">
                            <i class="fas fa-chart-pie mr-2"></i>Th√®mes & Articles
                        </button>
                        <button data-nav="social" class="px-4 py-2 rounded bg-gray-200 text-gray-700">
                            <i class="fas fa-share-alt mr-2"></i>R√©seaux Sociaux
                        </button>
                        <button data-nav="archiviste" class="px-4 py-2 rounded bg-gray-200 text-gray-700">
                            <i class="fas fa-archive mr-2"></i>Archiviste
                        </button>
                        <button data-nav="weak-indicators" class="px-4 py-2 rounded bg-gray-200 text-gray-700">
                            <i class="fas fa-chart-line mr-2"></i>Indicateurs Faibles
                        </button>
                    </div>
                </nav>

                <!-- ===== SECTION TH√àMES & ARTICLES ===== -->
                <div id="themes-section" class="dashboard-section">
                    <!-- Stats Cards existantes -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <!-- Total Articles -->
                        <div class="bg-white rounded-lg shadow-md p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Total Articles</p>
                                    <p id="statTotalArticles" class="text-3xl font-bold text-gray-800 mt-2">0</p>
                                </div>
                                <div class="bg-blue-100 p-3 rounded-full">
                                    <i class="fas fa-newspaper text-blue-600 text-2xl"></i>
                                </div>
                            </div>
                        </div>

                        <!-- Articles Positifs -->
                        <div class="bg-white rounded-lg shadow-md p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Articles Positifs</p>
                                    <p id="statPositiveArticles" class="text-3xl font-bold text-green-600 mt-2">0</p>
                                </div>
                                <div class="bg-green-100 p-3 rounded-full">
                                    <i class="fas fa-smile text-green-600 text-2xl"></i>
                                </div>
                            </div>
                        </div>

                        <!-- Articles N√©gatifs -->
                        <div class="bg-white rounded-lg shadow-md p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Articles N√©gatifs</p>
                                    <p id="statNegativeArticles" class="text-3xl font-bold text-red-600 mt-2">0</p>
                                </div>
                                <div class="bg-red-100 p-3 rounded-full">
                                    <i class="fas fa-frown text-red-600 text-2xl"></i>
                                </div>
                            </div>
                        </div>

                        <!-- Th√®mes Actifs -->
                        <div class="bg-white rounded-lg shadow-md p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Th√®mes Actifs</p>
                                    <p id="statActiveThemes" class="text-3xl font-bold text-purple-600 mt-2">0</p>
                                </div>
                                <div class="bg-purple-100 p-3 rounded-full">
                                    <i class="fas fa-tags text-purple-600 text-2xl"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Charts Row -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                        <!-- Sentiment Chart (4 cat√©gories) -->
                        <div class="bg-white rounded-lg shadow-md p-6">
                            <h2 class="text-xl font-bold text-gray-800 mb-4">
                                üéØ Distribution des Sentiments (4 cat√©gories)
                            </h2>
                            <div class="relative h-80">
                                <canvas id="sentimentChart"></canvas>
                            </div>
                            <div class="mt-4 text-xs text-gray-500 space-y-1">
                                <p>üü¢ <strong>Positif:</strong> Score > 0.3</p>
                                <p>üîµ <strong>Neutre Positif:</strong> Score 0.05 √† 0.3</p>
                                <p>üü° <strong>Neutre N√©gatif:</strong> Score -0.05 √† -0.3</p>
                                <p>üî¥ <strong>N√©gatif:</strong> Score < -0.3</p>
                            </div>
                        </div>

                        <!-- Theme Chart -->
                        <div class="bg-white rounded-lg shadow-md p-6">
                            <h2 class="text-xl font-bold text-gray-800 mb-4">
                                üìö Articles par Th√®me
                            </h2>
                            <div class="relative h-80">
                                <canvas id="themeChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Timeline Chart -->
                    <div class="bg-white rounded-lg shadow-md p-6 mb-8">
                        <h2 class="text-xl font-bold text-gray-800 mb-4">
                            üìà √âvolution Temporelle
                        </h2>
                        <div class="relative h-96">
                            <canvas id="timelineChart"></canvas>
                        </div>
                    </div>

                    <!-- Popular Themes -->
                    <div class="bg-white rounded-lg shadow-md p-6">
                        <h2 class="text-xl font-bold text-gray-800 mb-4">
                            üèÜ Th√®mes Populaires
                        </h2>
                        <div id="popularThemes" class="space-y-3">
                            <div class="text-center py-8 text-gray-500">
                                <i class="fas fa-spinner fa-spin text-2xl mb-2"></i>
                                <p>Chargement...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ===== SECTION R√âSEAUX SOCIAUX ===== -->
                <div id="social-section" class="dashboard-section hidden">
                    <!-- Vue unifi√©e r√©seaux sociaux -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-white rounded-lg shadow p-4">
                            <div class="text-2xl font-bold text-blue-600" id="social-posts">0</div>
                            <div class="text-sm text-gray-600">Posts sociaux</div>
                        </div>
                        <div class="bg-white rounded-lg shadow p-4">
                            <div class="text-2xl font-bold text-green-600" id="social-positive">0</div>
                            <div class="text-sm text-gray-600">Sentiment +</div>
                        </div>
                        <div class="bg-white rounded-lg shadow p-4">
                            <div class="text-2xl font-bold text-red-600" id="social-negative">0</div>
                            <div class="text-sm text-gray-600">Sentiment -</div>
                        </div>
                        <div class="bg-white rounded-lg shadow p-4">
                            <div class="text-2xl font-bold text-purple-600" id="social-factor-z">0.000</div>
                            <div class="text-sm text-gray-600">Facteur Z</div>
                        </div>
                    </div>

                    <!-- Actions rapides sociales -->
                    <div class="flex space-x-2 mb-4">
                        <button data-action="fetch-social-posts" class="bg-blue-600 text-white px-4 py-2 rounded">
                            <i class="fas fa-download mr-2"></i>R√©cup√©rer posts
                        </button>
                        <button data-action="compare-social-rss" class="bg-purple-600 text-white px-4 py-2 rounded">
                            <i class="fas fa-balance-scale mr-2"></i>Comparer RSS
                        </button>
                        <button data-action="manage-social-instances" class="bg-gray-600 text-white px-4 py-2 rounded">
                            <i class="fas fa-cog mr-2"></i>Instances
                        </button>
                    </div>

                    <!-- R√©sultats sociaux -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Top th√®mes sociaux -->
                        <div class="bg-white rounded-lg shadow p-6">
                            <h3 class="text-lg font-bold text-gray-800 mb-4">
                                <i class="fas fa-chart-line text-green-600 mr-2"></i>
                                Top Th√®mes Sociaux
                            </h3>
                            <div id="social-top-themes">
                                <div class="text-center py-4 text-gray-500">
                                    <i class="fas fa-spinner fa-spin"></i>
                                    <p class="mt-2">Chargement...</p>
                                </div>
                            </div>
                        </div>

                        <!-- Comparaison RSS vs Social -->
                        <div class="bg-white rounded-lg shadow p-6">
                            <h3 class="text-lg font-bold text-gray-800 mb-4">
                                <i class="fas fa-balance-scale text-purple-600 mr-2"></i>
                                Comparaison M√©dias
                            </h3>
                            <div id="social-comparison">
                                <div class="text-center py-4 text-gray-500">
                                    <i class="fas fa-spinner fa-spin"></i>
                                    <p class="mt-2">Lancez une comparaison</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ===== SECTION ARCHIVISTE ===== -->
                <div id="archiviste-section" class="dashboard-section hidden">
                    <!-- Vue unifi√©e archiviste -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-white rounded-lg shadow p-4">
                            <div class="text-2xl font-bold text-amber-600" id="historical-analyses">0</div>
                            <div class="text-sm text-gray-600">Analyses historiques</div>
                        </div>
                        <div class="bg-white rounded-lg shadow p-4">
                            <div class="text-2xl font-bold text-orange-600" id="archiviste-periods">0</div>
                            <div class="text-sm text-gray-600">P√©riodes disponibles</div>
                        </div>
                        <div class="bg-white rounded-lg shadow p-4">
                            <div class="text-2xl font-bold text-red-600" id="archiviste-items">0</div>
                            <div class="text-sm text-gray-600">Articles archiv√©s</div>
                        </div>
                        <div class="bg-white rounded-lg shadow p-4">
                            <div class="text-2xl font-bold text-green-600" id="archiviste-trends">0</div>
                            <div class="text-sm text-gray-600">Tendances suivies</div>
                        </div>
                    </div>

                    <!-- Actions rapides archiviste -->
                    <div class="flex space-x-2 mb-4">
                        <button data-action="analyze-historical-period" class="bg-amber-600 text-white px-4 py-2 rounded">
                            <i class="fas fa-search mr-2"></i>Analyser p√©riode
                        </button>
                        <button data-action="compare-with-history" class="bg-orange-600 text-white px-4 py-2 rounded">
                            <i class="fas fa-balance-scale mr-2"></i>Comparer historique
                        </button>
                        <button data-action="show-trends-evolution" class="bg-red-600 text-white px-4 py-2 rounded">
                            <i class="fas fa-chart-line mr-2"></i>√âvolution tendances
                        </button>
                    </div>

                    <!-- Derni√®res analyses -->
                    <div class="bg-white rounded-lg shadow p-6 mb-6">
                        <h3 class="text-lg font-bold text-gray-800 mb-4">
                            <i class="fas fa-history text-amber-600 mr-2"></i>
                            Derni√®res Analyses Historiques
                        </h3>
                        <div id="recent-historical-analyses">
                            <div class="text-center py-4 text-gray-500">
                                <i class="fas fa-spinner fa-spin"></i>
                                <p class="mt-2">Chargement...</p>
                            </div>
                        </div>
                    </div>

                    <!-- Comparaisons temporelles -->
                    <div class="bg-white rounded-lg shadow p-6">
                        <h3 class="text-lg font-bold text-gray-800 mb-4">
                            <i class="fas fa-balance-scale text-orange-600 mr-2"></i>
                            Comparaisons Temporelles
                        </h3>
                        <div id="historical-comparisons">
                            <div class="text-center py-4 text-gray-500">
                                <p>Utilisez "Comparer historique" pour analyser les √©volutions</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ===== SECTION INDICATEURS FAIBLES ===== -->
                <div id="weak-indicators-section" class="dashboard-section hidden">
                    <!-- Vue unifi√©e indicateurs faibles -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-white rounded-lg shadow p-4">
                            <div class="text-2xl font-bold text-blue-600" id="monitored-countries">0</div>
                            <div class="text-sm text-gray-600">Pays surveill√©s</div>
                        </div>
                        <div class="bg-white rounded-lg shadow p-4">
                            <div class="text-2xl font-bold text-red-600" id="weak-indicator-alerts">0</div>
                            <div class="text-sm text-gray-600">Alertes actives</div>
                        </div>
                        <div class="bg-white rounded-lg shadow p-4">
                            <div class="text-2xl font-bold text-green-600" id="active-radios">0</div>
                            <div class="text-sm text-gray-600">Flux radio actifs</div>
                        </div>
                        <div class="bg-white rounded-lg shadow p-4">
                            <div class="text-2xl font-bold text-purple-600" id="economic-indicators">0</div>
                            <div class="text-sm text-gray-600">Indicateurs √©co</div>
                        </div>
                    </div>

                    <!-- Statut global -->
                    <div class="mb-6" id="weak-indicators-status">
                        <div class="bg-yellow-50 border border-yellow-200 rounded p-4">
                            <div class="flex items-center">
                                <i class="fas fa-info-circle text-yellow-600 mr-2"></i>
                                <span class="text-yellow-800">Chargement des indicateurs...</span>
                            </div>
                        </div>
                    </div>

                    <!-- Actions rapides -->
                    <div class="flex space-x-2 mb-6">
                        <button data-action="scan-travel-advice" class="bg-blue-600 text-white px-4 py-2 rounded">
                            <i class="fas fa-sync-alt mr-2"></i>Scanner conseils voyage
                        </button>
                        <button data-action="update-economic-data" class="bg-purple-600 text-white px-4 py-2 rounded">
                            <i class="fas fa-chart-line mr-2"></i>Donn√©es √©conomiques
                        </button>
                        <button data-action="manage-sdr-streams" class="bg-green-600 text-white px-4 py-2 rounded">
                            <i class="fas fa-broadcast-tower mr-2"></i>G√©rer flux SDR
                        </button>
                    </div>

                    <!-- Grille des donn√©es -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Conseils aux voyageurs -->
                        <div class="bg-white rounded-lg shadow p-6">
                            <h3 class="text-lg font-bold text-gray-800 mb-4">
                                <i class="fas fa-passport text-blue-600 mr-2"></i>
                                Conseils aux Voyageurs
                            </h3>
                            <div id="travel-advice-results">
                                <div class="text-center py-4 text-gray-500">
                                    <p>Scanner les conseils pour afficher les donn√©es</p>
                                </div>
                            </div>
                        </div>

                        <!-- Donn√©es √©conomiques -->
                        <div class="bg-white rounded-lg shadow p-6">
                            <h3 class="text-lg font-bold text-gray-800 mb-4">
                                <i class="fas fa-chart-line text-purple-600 mr-2"></i>
                                Indicateurs √âconomiques
                            </h3>
                            <div id="economic-data">
                                <div class="text-center py-4 text-gray-500">
                                    <p>Actualiser les donn√©es pour afficher les indicateurs</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Overlay pour modales -->
    <div id="modal-overlay" class="hidden fixed inset-0 bg-black opacity-50 z-40"></div>

    <!-- Scripts -->
    <script src="/static/js/app.js"></script>
    <script src="/static/js/instance-manager.js"></script>
    <script src="/static/js/dashboard.js"></script>
    <script src="/static/js/social-aggregator.js"></script>
    <script src="/static/js/archiviste.js"></script>
    <script src="/static/js/weak-indicators.js"></script>

    <style>
        .pulse-animation {
            animation: pulse 0.5s ease-in-out;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        .dashboard-section {
            transition: opacity 0.3s ease-in-out;
        }

        /* Styles pour les cartes de statistiques */
        .stat-card {
            transition: all 0.3s ease;
        }

            .stat-card:hover {
                transform: translateY(-2px);
                box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            }
    </style>
</body>
</html>